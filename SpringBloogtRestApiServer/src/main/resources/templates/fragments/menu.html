<!--
################################################################################################
################################################################################################

	COMMON MENU OF ALL PAGE

################################################################################################
################################################################################################
-->
<div th:fragment="menu">
	<nav id="MainNavbar" class="navbar navbar-expand-lg navbar-dark ">

		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false"
			aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active"><a class="nav-link" href="#">Home
						<span class="sr-only">(current)</span>
				</a></li>

				<li class="nav-item"><a class="nav-link"
					th:href="@{/post/list}">Post list</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/userlist}">User
						list</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/newUser}">Create
						User</a></li>
				<li class="nav-item"><a class="nav-link"
					th:href="@{/post/newPost}">Create Post</a></li>
				<li class="nav-item dropdown"><a
					class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
					role="button" data-toggle="dropdown" aria-haspopup="true"
					aria-expanded="false"> Categories </a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="#">Action</a> <a
							class="dropdown-item" href="#">Another action</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="#">Something else here</a>
					</div></li>
				<li class="nav-item">
					<form class="form-inline my-2 my-lg-0">
						<input class="form-control mr-sm-2" type="search"
							placeholder="Search" aria-label="Search">
						<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
					</form>
				</li>
			</ul>
			<ul class="navbar-nav navbar-right">
					<li sec:authorize="isAuthenticated()">
						<a th:href="@{'/chatList'}">
							<span class="text-danger" th:text="${unreadMessages}"></span>
							<img th:if ="${unreadMessages} > 0" height="40px" width="40px" src="http://pngimg.com/uploads/envelope/envelope_PNG18366.png" />
							<img th:if ="${unreadMessages} == 0" height="40px" width="40px" src="http://geekfluent.com/wp-content/uploads/2017/03/Open-Letter.png" />
							
							
						</a>
					</li>
					<li sec:authorize="!isAuthenticated()">
						<a class="btn btn-outline-success" th:href="@{/login}">Sign In</a>
					</li>
				<li sec:authorize="isAuthenticated()" class="dropdown show">
					<a
					class="btn btn-outline-success dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="false">
					<span>Logged as : </span><span sec:authentication="name"></span></a>

					<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
					<div class="dropdown-item"><a th:href="@{/profile/} + ${#authentication.name}">Check my profile</a></div>
					<div id="LogoutDropdownMenu">
						<form id="logoutForm" th:action="@{/logout}" method="post">
							<button class="dropdown-item"
								onclick="document.getElementById('logoutForm').submit();"
								type="submit">Sign Out</button>
							<input type="hidden" th:name="${_csrf.parameterName}"
								th:value="${_csrf.token}" />
						</form>
						</div>
					</div>
				</li>
			</ul>
		</div>
	</nav>


	<div class="alert alert-success" th:if="${success != null}"
		th:text="${success}"></div>
	<div class="alert alert-danger" th:if="${error != null}"
		th:text="${error}"></div>
	<div class="alert alert-warning" th:if="${warning != null}"
		th:text="${warning}"></div>
	<div class="alert alert-info" th:if="${info != null}" th:text="${info}"></div>



	<div class="brandLogo">
		<a class="navbar-brand m-3" href="#" th:href="@{/post/list}"> <img
			width="200px" th:src="@{/images/logo.png}" /> <!-- 
  Rest blog website sample
   -->
		</a>
	</div>

</div>